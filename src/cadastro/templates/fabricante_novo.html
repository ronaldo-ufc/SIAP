{% extends "base.html" %}
{% import "forms.html" as forms %}

{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            {{ forms.error_message(form, mensagem)}}
        </div>
        <div class="col-md-10 col-md-offset-1">

            <div class="panel panel-default">
                <div class="panel-heading"><h4>Cadastrar Nova Marca</h4></div>
                <div class="panel-body">
                    <form name="pesquisa" action="" method="POST">
                        <div class="row">
                            <div class="col-md-4">
                                <label for="fabricante" class="control-label">Nome</label>
                                <input name="fabricante" type="text" class="form-control" id="fabricante" required>
                            </div>
                            <div class="col-md-2">
                                <div class="form-group"><br>
                                    <button  type="submit" class="btn btn-primary">
                                        <i class="fas fa-save"></i> Salvar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="panel panel-default table-responsive">
                <div class="panel-heading">Fabricantes</div>
                <div class="panel-body">
                <div class="col-md-2">
                        <div class="form-group">
                        </div>
                    </div>

                    <table class="table table-condensed table-hover table-striped" id="tabela">
                        <thead class="bg-primary">
                            <tr><td>Nome</td><td>Gerenciar Modelo</td><td class="text-center">Excluir</td></tr>
                        </thead>
                        <tbody id="tbody">
                            {% for fabricante in fabricantes %}
                            <tr id="trItens">
                                <td>{{fabricante.getNome}}</td>
                                <td class="col-lg-1 bg-success"> <p class="text-center"><a href="modelo/{{fabricante.getFabricante_id}}"><i class="fas fa-cog"></i></a></p></td>
                                <td class="col-lg-1 bg-danger"><p class="text-center"><a href="fabricante/delete/{{fabricante.getFabricante_id}}"><i class="far fa-trash-alt"></i> </a></p></td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!--<script type="text/javascript">
    function key() {
        var c = document.getElementById("txtBusca").value;
        console.log(c);
        $("#trItens td").css("display", "block");
        $("#trItens td").each(function () {
            if ($(this).text().indexOf(c) < 0)
                $(this).css("display", "none");
        });


    }
</script>-->
<!--<script>
//    PEGANDO OS ELEMENTOS SALVOS NA TABELA
    var tbody = document.getElementById('tbody');
//    PEGANDO OS ELEMENTOS "FILHOS" DA TALEBA
 
    //PEGANDO EVENTO
    document.getElementById('txtBusca').addEventListener("keyup",function (){
        var busca = document.getElementById('txtBusca').value.toUpperCase();
//    PERCORRENDO AS LINHAS DA TABELA
    for(var i = 0; i < tbody.childNodes.length; i++){
      var achou = false; 
//      ACESSANDO O ELEMENTO TR DA LINHA i
      var tr = tbody.childNodes[i];
      console.log(tbody.childNodes[i]);
//      PEGANDO TODOS OS FILHOS DOS TR'S, QUE SÃƒO OS TD'S
      
      var td = tr.childNodes;
      for(var j = 0; j < td.childNodes.length; j++){
//          PEGANDO O VALOR DE CADA COLUNA NA LINHA
          var value = td[j].childNodes[0].nodeValue;
          if(value.indexOf(busca) >= 0){
              achou = true;
          }
      }
      if(achou){
          tr.style.display = "table-row";
      }else{
          tr.style.display = "none";
      }
    }
    })
    
</script>-->

{% endblock %}